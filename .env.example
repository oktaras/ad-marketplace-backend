# =============================================================================
# Ads Marketplace Backend Environment (Vercel API + Railway Worker)
# =============================================================================
# Use the same variable set for:
# - Vercel project rooted at /backend (API runtime)
# - Railway worker service running `npm run start:worker`

# -----------------------------------------------------------------------------
# Core Runtime
# -----------------------------------------------------------------------------
NODE_ENV=production
PORT=3000
DATABASE_URL=postgresql://USER:PASSWORD@HOST:5432/DB_NAME?sslmode=require
REDIS_URL=rediss://default:PASSWORD@HOST:6379
JWT_SECRET=replace-with-strong-random-secret
CORS_ORIGINS=https://<frontend-domain>,https://telegram.org,https://web.telegram.org
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=100

# -----------------------------------------------------------------------------
# Telegram
# -----------------------------------------------------------------------------
TELEGRAM_BOT_TOKEN=
TELEGRAM_BOT_USERNAME=your_bot_username
MINI_APP_BASE_URL=https://<frontend-domain>
DEAL_CHAT_DELETE_TOPICS_ON_CLOSE=true

# Optional MTProto analytics access
TELEGRAM_API_ID=
TELEGRAM_API_HASH=
MTPROTO_SESSION_ENCRYPTION_KEY=

# -----------------------------------------------------------------------------
# TON / Escrow
# -----------------------------------------------------------------------------
TON_NETWORK=testnet
TON_CENTER_API_URL=https://testnet.toncenter.com/api/v2/jsonRPC
TON_CENTER_API_KEY=
PLATFORM_FEE_WALLET_ADDRESS=
PLATFORM_MNEMONIC=
BACKEND_WALLET_MNEMONIC=
BACKEND_WALLET_ADDRESS=
ESCROW_FACTORY_ADDRESS=
VERIFICATION_SIGNER_SECRET=
PLATFORM_FEE_BPS=500
PLATFORM_FEE_PERCENT=5

# -----------------------------------------------------------------------------
# Currency
# -----------------------------------------------------------------------------
SUPPORTED_CURRENCIES=TON
DEFAULT_CURRENCY=TON

# -----------------------------------------------------------------------------
# Worker Scheduling (used by worker runtime)
# -----------------------------------------------------------------------------
ANALYTICS_REFRESH_ENABLED=true
ANALYTICS_REFRESH_CRON=0 3 * * *
ANALYTICS_REFRESH_TZ=UTC

# -----------------------------------------------------------------------------
# Media Storage
# -----------------------------------------------------------------------------
# Recommended in production/Vercel: vercel_blob
MEDIA_STORAGE_DRIVER=vercel_blob
MEDIA_MAX_FILES=5
MEDIA_MAX_IMAGE_MB=10
MEDIA_MAX_VIDEO_MB=50
MEDIA_ALLOWED_MIME=image/*,video/*
MEDIA_LOCAL_DIR=.uploads
MEDIA_PUBLIC_BASE_URL=https://<backend-domain>
MEDIA_UPLOAD_SIGNING_SECRET=replace-with-random-secret
MEDIA_UPLOAD_TOKEN_TTL_SECONDS=600
BLOB_READ_WRITE_TOKEN=

# -----------------------------------------------------------------------------
# Optional Admin Access
# -----------------------------------------------------------------------------
ADMIN_TELEGRAM_IDS=
